(()=>{"use strict";let e=null;chrome.runtime.onMessage.addListener(((t,s,n)=>{const{action:o,jobData:a,chatMessage:c}=t;return"openChatPage"===o?(async(t,s,n)=>{const{encryptBossId:o,encryptJobId:a,securityId:c,lid:i}=t;e||(e=await new Promise((e=>{chrome.windows.create({url:"about:blank",type:"normal",state:"minimized"},(t=>e(t.id)))})));const r=await new Promise((t=>{chrome.tabs.create({windowId:e,url:`https://www.zhipin.com/web/geek/chat?id=${o}&jobId=${a}&securityId=${c}&lid=${i}`},(e=>t(e.id)))}));chrome.scripting.executeScript({target:{tabId:r},func:async e=>{const t=e=>document.querySelector(e),s=e=>new Promise((t=>setTimeout(t,e)));await s(500);const[n,o,a]=[t("#chat-input"),t(".emoj.emoj-1"),t(".chat-op .btn-send")];return n&&o&&a?(o.click(),await s(500),n.innerText=e,await s(500),a.click(),await s(500),{status:"success",msg:"发送消息完成"}):{status:"error",msg:"发送消息失败"}},args:[s]},n)})(a,c,n):"closeWindow"===o&&e&&chrome.windows.remove(e,(()=>{e=null})),!0})),chrome.windows.onRemoved.addListener((t=>{t===e&&(e=null)}))})();